import{i as r,D as X,r as Y,o as c,c as m,a as s,w as l,d as o,F as P,E as y,b as d,G as Z,t as g,f as b,q as ee,u as oe}from"./app-CM4qF5Mh.js";/* empty css                                                                         */import{d as C}from"./dayjs.min-BmVjniEp.js";import"./es-CfuWOGnh.js";import{C as te}from"./index-C7-iRoWi.js";import{M as se}from"./index-Dt6_vk1N.js";import{a as D}from"./index-DowZ0jtg.js";import{B as le}from"./index-Ch1tnbtJ.js";import{S as ae}from"./index-BUSCL0Jf.js";import{I as ne}from"./index-BvCjgTVp.js";import{_ as ie,F as re}from"./index-6pUwLxd9.js";import{_ as de,a as ue}from"./index-BzSoxssN.js";import{_ as ce}from"./index-C1SlcFe-.js";import"./compact-item-DUQbUYEe.js";import"./index-DQ38BaY5.js";import"./Col-BH05Pm7P.js";import"./firstNotUndefined-Be8Tj-9n.js";import"./shallowequal-Z3j61R7b.js";import"./index-DjYGw9Ck.js";import"./injectionKey-BXVc-oGP.js";import"./collapseMotion-xIomzb1j.js";import"./useRefs-BxddWkqV.js";import"./FormItemContext-Mw1CmCCY.js";import"./statusUtils-D4gmIbEh.js";import"./useMemo-BaSzLHlE.js";import"./DownOutlined-v2yC7F82.js";import"./CheckOutlined-ZZAj1O78.js";import"./move-DMrzH_4-.js";import"./index-CC8guYNk.js";import"./EyeOutlined-fSaQJHtN.js";const pe={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},me=o("div",null,[o("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}}," II. Estudios de posgrado y actualización ")],-1),_e={style:{"margin-top":"-5px"}},fe={class:"mt-3"},ve={class:"flex justify-between"},ge={class:""},he={style:{"margin-bottom":"0px","margin-top":"-2px"}},ye={class:"font-bold",style:{"font-size":".9rem"}},be={class:"ml-8 mb-1"},xe={class:"",style:{"font-size":".9rem"}},we={key:0,class:"italic"},ke={class:"font-bold",style:{color:"gray"}},Ce={class:"flex",style:{"margin-top":"0px"}},De=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[o("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o("circle",{cx:"12",cy:"12",r:"3"})],-1),Fe=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[o("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),Le=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[o("polyline",{points:"3 6 5 6 21 6"}),o("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),ze={class:""},Ue=o("label",null,[d("Tipo"),o("span",{style:{color:"red"}},"*")],-1),Be=o("label",null,[d("Denominación"),o("span",{style:{color:"red"}},"*")],-1),je=o("label",null,[d("Institucion"),o("span",{style:{color:"red"}},"*")],-1),Ee=o("label",null,[d("Semestres"),o("span",{style:{color:"red"}})],-1),Me=o("label",null,[d("Archivo PDF (Max. 2mb)"),o("span",{style:{color:"red"}},"*")],-1),Pe={key:0,class:"mt-2"},Se=["src"],$e={class:"flex justify-end"},Ae={key:0,class:"mt-2"},Ie=["src"],Re={class:"flex justify-end"},ho={__name:"estudios_actualizacion",setup(Ve){const F=window.location.origin;C.locale("es");const S=()=>{_.value=!0},$=e=>{t.id=e.id,t.denominacion=e.denominacion,t.institucion=e.institucion,e.fec_inicio&&(t.fec_inicio=C(e.fec_inicio)),e.fec_fin&&(t.fec_fin=C(e.fec_fin)),p.value=F+"/"+e.url,t.semestres=e.semestres,t.tipo=e.id_tipo,_.value=!0},_=r(!1),L=r([]),z=r([]),h=r(!1),x=r(null),A=e=>{x.value=e,h.value=!0},I=r(),t=X({id:null,tipo:null,denominacion:"",institucion:"",semestres:null,fec_inicio:null,fec_fin:null,fileList:null}),R=async()=>{let e=await y.get("/get-tipo_estudio_actualizacion");e.data.estado==!0?z.value=e.data.datos:console.log("Ocurrió un error")},V=e=>{console.log(`selected ${e}`)},q=e=>{console.log(`selected ${e}`)},f=r(!1),p=r(null),U=r(0),N=e=>{if(e.type==="application/pdf"){const a=new FileReader;a.onload=i=>{p.value=i.target.result},a.readAsDataURL(e),t.fileList=[e]}else D.error("¡Solo puedes cargar archivos PDF!");return!1},w=async()=>{const e=await y.get("/get-estudios-usuario");e.data.estado==!0?L.value=e.data.datos:console.log("No se encontraron datos")},O=()=>{p.value=null,t.fileList=[]},T=async()=>{const e=new FormData;t.fileList[0]&&e.append("file",t.fileList[0]),t.id!=null&&e.append("id",t.id),e.append("denominacion",t.denominacion),t.semestres!=null&&e.append("semestres",t.semestres),e.append("institucion",t.institucion),e.append("tipo",t.tipo),e.append("file",t.fileList[0]);try{f.value=!0,U.value=0;const a=await y.post("subir-estudios-posgrado",e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:i=>{U.value=Math.round(i.loaded*100/i.total)}});_.value=!1,f.value=!1,t.value=null,D.success("¡Archivo PDF cargado exitosamente!"),await w()}catch(a){f.value=!1,D.error("Error al cargar el archivo."),console.error("File upload failed:",a)}},G=async e=>{(await y.get("/eliminar-estudio/"+e)).data.estado==!0?w():console.log("Ocurrió un error")},H=[{value:1,label:"1 semestre"},{value:2,label:"2 semestres"},{value:3,label:"3 semestres"},{value:4,label:"4 semestres"},{value:5,label:"5 semestres"},{value:6,label:"6 semestres"},{value:7,label:"7 semestres"},{value:8,label:"8 semestres"},{value:9,label:"9 semestres"},{value:10,label:"10 semestres"}];return w(),R(),(e,a)=>{const i=le,u=de,k=ue,J=te,B=ae,v=ie,j=ne,K=Y("upload-outlined"),Q=ce,W=re,E=se;return c(),m(P,null,[s(J,{class:"mx-2 my-2"},{default:l(()=>[o("div",null,[o("div",pe,[me,o("div",_e,[s(i,{onClick:a[0]||(a[0]=n=>S())},{default:l(()=>[d("Agregar")]),_:1})])]),o("div",fe,[(c(!0),m(P,null,Z(L.value,n=>(c(),m("div",{class:"mb-2",key:n},[s(k,{gutter:16},{default:l(()=>[s(u,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[o("div",ve,[o("div",ge,[o("div",he,[o("span",ye,g(n.tipo_nombre),1)]),o("div",be,[o("div",null,[o("span",xe,g(n.denominacion),1)]),o("div",null,g(n.institucion),1),n.semestres?(c(),m("div",we,[o("span",ke,g(n.semestres)+" semestres ",1)])):b("",!0)])]),o("div",Ce,[s(i,{onClick:M=>A(n.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:l(()=>[De]),_:2},1032,["onClick"]),s(i,{onClick:M=>$(n),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:l(()=>[Fe]),_:2},1032,["onClick"]),s(i,{danger:"",onClick:M=>G(n.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:l(()=>[Le]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1}),o("div",ze,[s(E,{open:_.value,"onUpdate:open":a[5]||(a[5]=n=>_.value=n),width:"1000px",title:"Registro de estudios o actualizaciones",onOk:e.handleOk},{footer:l(()=>[o("div",$e,[s(i,{type:"primary",disabled:!p.value,loading:f.value,style:{"margin-top":"16px"},onClick:T},{default:l(()=>[d(g(f.value?"Subiendo...":"Comenzar carga"),1)]),_:1},8,["disabled","loading"])])]),default:l(()=>[s(W,{ref_key:"formDatos",ref:I,name:"form",model:t,rules:e.formRules},{default:l(()=>[s(k,{gutter:16},{default:l(()=>[s(u,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[Ue,s(v,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(B,{ref:"select",value:t.tipo,"onUpdate:value":a[1]||(a[1]=n=>t.tipo=n),style:{width:"100%"},options:z.value,onFocus:e.focus,onChange:V},null,8,["value","options","onFocus"])]),_:1})]),_:1}),s(u,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[Be,s(v,{name:"denominacion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(j,{value:t.denominacion,"onUpdate:value":a[2]||(a[2]=n=>t.denominacion=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(u,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[je,s(v,{name:"institucion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(j,{value:t.institucion,"onUpdate:value":a[3]||(a[3]=n=>t.institucion=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),t.tipo==1||t.tipo==2||t.tipo==3||t.tipo==4?(c(),ee(u,{key:0,xs:24,sm:24,md:24,lg:24},{default:l(()=>[Ee,s(v,{name:"semestres"},{default:l(()=>[s(B,{ref:"select",value:t.semestres,"onUpdate:value":a[4]||(a[4]=n=>t.semestres=n),style:{width:"100%"},options:H,onFocus:e.focus,onChange:q},null,8,["value","onFocus"])]),_:1})]),_:1})):b("",!0),s(u,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[Me,s(v,{name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(Q,{"file-list":t.fileList,"before-upload":N,onRemove:O},{default:l(()=>[s(i,null,{default:l(()=>[s(K),d(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),p.value?(c(),m("div",Pe,[o("iframe",{src:p.value,width:"100%",height:"300px"},null,8,Se)])):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open","onOk"]),s(E,{open:h.value,"onUpdate:open":a[7]||(a[7]=n=>h.value=n),title:"Documento adjunto",style:{"min-width":"900px"}},{footer:l(()=>[o("div",Re,[s(i,{onClick:a[6]||(a[6]=n=>h.value==!1)},{default:l(()=>[d(" Aceptar ")]),_:1})])]),default:l(()=>[s(k,{gutter:16},{default:l(()=>[s(u,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[x.value?(c(),m("div",Ae,[o("iframe",{src:oe(F)+"/"+x.value,width:"100%",height:"500px"},null,8,Ie)])):b("",!0)]),_:1})]),_:1})]),_:1},8,["open"])])],64)}}};export{ho as default};
