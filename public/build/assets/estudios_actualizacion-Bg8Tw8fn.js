import{i as u,D as X,r as Z,o as p,c as _,a as o,w as t,d as e,F as S,E as y,b as r,G as ee,t as m,f as b,q as oe,u as te}from"./app-DjzP6Xc8.js";/* empty css                                                                         */import{C as se}from"./index-D0HqagQ7.js";import{M as le}from"./index-D4hYEUdR.js";import{a as D}from"./index-C6cJBKTJ.js";import{B as ae}from"./index-B-NKoIPa.js";import{S as ne}from"./index-CllVJQ-s.js";import{I as ie}from"./index-DX_P1xWU.js";import{D as re}from"./dayjs-Bw50x_LS.js";import{_ as de,F as ue}from"./index-BVPH4-rA.js";import{f as Y}from"./format-cwXK75ha.js";import{_ as ce,a as pe}from"./index-DVqLySPe.js";import{_ as me}from"./index-Dz-7ay72.js";import"./compact-item-C3MMsdSX.js";import"./index-C9tvn3ls.js";import"./Col-D9pf7s4-.js";import"./firstNotUndefined-By4c3kmV.js";import"./shallowequal-Bw13IqAx.js";import"./index-CZlnR-fw.js";import"./injectionKey-BXVc-oGP.js";import"./collapseMotion-v82YJKL-.js";import"./useRefs-CY2EYO9G.js";import"./FormItemContext-BStwt122.js";import"./statusUtils-DDrkrFt_.js";import"./useMemo-BDnbGG_P.js";import"./DownOutlined-BjpBAteB.js";import"./CheckOutlined-C91lsFFN.js";import"./move-DKmVe9rK.js";import"./index-D7UOKjLm.js";import"./EyeOutlined-C0haTXOK.js";const _e={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},fe=e("div",null,[e("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}}," II. Estudios de posgrado y actualización ")],-1),ve={style:{"margin-top":"-5px"}},ge={class:"mt-3"},he={class:"flex justify-between",style:{}},ye={class:""},be={style:{"margin-bottom":"0px","margin-top":"-2px"}},xe={class:"font-bold",style:{"font-size":".9rem"}},we={class:"ml-8 mb-1"},ke={class:"",style:{"font-size":".9rem"}},De={class:"text-start"},Ce={key:0,class:"italic"},Fe={class:"font-bold",style:{color:"gray"}},Me={class:"flex",style:{"margin-top":"0px"}},Ue=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),ze=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),Be=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),Ee={class:""},Le=e("label",null,[r("Tipo"),e("span",{style:{color:"red"}},"*")],-1),je=e("label",null,[r("Denominación"),e("span",{style:{color:"red"}},"*")],-1),Pe=e("label",null,[r("Institucion"),e("span",{style:{color:"red"}},"*")],-1),Se=e("label",null,[r("Fec inicio"),e("span",{style:{color:"red"}},"*")],-1),Ye=e("label",null,[r("Fec fin"),e("span",{style:{color:"red"}},"*")],-1),qe=e("label",null,[r("Semestres"),e("span",{style:{color:"red"}})],-1),Ve=e("label",null,[r("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1),$e={key:0,class:"mt-2"},Ae=["src"],Ie={class:"flex justify-end"},Re={key:0,class:"mt-2"},Ne=["src"],Oe={class:"flex justify-end"},ko={__name:"estudios_actualizacion",setup(Te){const q=window.location.origin,V=()=>{g.value=!0},g=u(!1),C=u([]),F=u([]),h=u(!1),x=u(null),M=s=>{x.value=s,h.value=!0},$=u(),n=X({id:null,tipo:null,denominacion:"",institucion:"",semestres:null,fec_inicio:null,fec_fin:null,fileList:[]}),A=async()=>{let s=await y.get("/get-tipo_estudio_actualizacion");s.data.estado==!0?F.value=s.data.datos:console.log("Ocurrió un error")},I=s=>{console.log(`selected ${s}`)},R=s=>{console.log(`selected ${s}`)},f=u(!1),v=u(null),U=u(0),N=s=>{if(s.type==="application/pdf"){const l=new FileReader;l.onload=i=>{v.value=i.target.result},l.readAsDataURL(s),n.fileList=[s]}else D.error("¡Solo puedes cargar archivos PDF!");return!1},w=async()=>{const s=await y.get("/get-estudios-usuario");s.data.estado==!0?C.value=s.data.datos:console.log("No se encontraron datos")},O=()=>{v.value=null,n.fileList=[]},T=async()=>{const s=new FormData;s.append("denominacion",n.denominacion),s.append("semestres",n.semestres),s.append("institucion",n.institucion),s.append("fec_inicio",Y(new Date(n.fec_inicio),"yyyy-MM-dd")),s.append("fec_fin",Y(new Date(n.fec_fin),"yyyy-MM-dd")),s.append("tipo",n.tipo),s.append("file",n.fileList[0]);try{f.value=!0,U.value=0;const l=await y.post("subir-estudios-posgrado",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:i=>{U.value=Math.round(i.loaded*100/i.total)}});g.value=!1,f.value=!1,n.value=null,D.success("¡Archivo PDF cargado exitosamente!"),await w()}catch(l){f.value=!1,D.error("Error al cargar el archivo."),console.error("File upload failed:",l)}},z=s=>{var l=s.split("-"),i=l.reverse().join("/");return i},G=async s=>{(await y.get("/eliminar-estudio/"+s)).data.estado==!0?w():console.log("Ocurrió un error")},H=[{value:1,label:"1 semestre"},{value:2,label:"2 semestres"},{value:3,label:"3 semestres"},{value:4,label:"4 semestres"},{value:5,label:"5 semestres"},{value:6,label:"6 semestres"},{value:7,label:"7 semestres"},{value:8,label:"8 semestres"},{value:9,label:"9 semestres"},{value:10,label:"10 semestres"}];return w(),A(),(s,l)=>{const i=ae,d=ce,k=pe,J=se,B=ne,c=de,E=ie,L=re,K=Z("upload-outlined"),Q=me,W=ue,j=le;return p(),_(S,null,[o(J,{class:"mx-2 my-2"},{default:t(()=>[e("div",null,[e("div",_e,[fe,e("div",ve,[o(i,{onClick:l[0]||(l[0]=a=>V())},{default:t(()=>[r("Agregar")]),_:1})])]),e("div",ge,[(p(!0),_(S,null,ee(C.value,a=>(p(),_("div",{class:"mb-2",key:a},[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:20,md:20,lg:24},{default:t(()=>[e("div",he,[e("div",ye,[e("div",be,[e("span",xe,m(a.tipo_nombre),1)]),e("div",we,[e("div",null,[e("span",ke,m(a.denominacion),1)]),e("div",null,m(a.institucion),1),e("div",De," De "+m(z(a.fec_inicio))+" a "+m(z(a.fec_fin)),1),a.semestres?(p(),_("div",Ce,[e("span",Fe,m(a.semestres)+" semestres ",1)])):b("",!0)])]),e("div",Me,[o(i,{onClick:P=>M(a.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[Ue]),_:2},1032,["onClick"]),o(i,{onClick:P=>M(a.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[ze]),_:2},1032,["onClick"]),o(i,{danger:"",onClick:P=>G(a.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[Be]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1}),e("div",Ee,[o(j,{open:g.value,"onUpdate:open":l[7]||(l[7]=a=>g.value=a),width:"1000px",title:"Registro de estudios o actualizaciones",onOk:s.handleOk},{footer:t(()=>[e("div",Ie,[o(i,{type:"primary",disabled:!v.value,loading:f.value,style:{"margin-top":"16px"},onClick:T},{default:t(()=>[r(m(f.value?"Subiendo...":"Comenzar carga"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[o(W,{ref_key:"formDatos",ref:$,name:"form",model:n,rules:s.formRules},{default:t(()=>[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[Le,o(c,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(B,{ref:"select",value:n.tipo,"onUpdate:value":l[1]||(l[1]=a=>n.tipo=a),style:{width:"100%"},options:F.value,onFocus:s.focus,onChange:I},null,8,["value","options","onFocus"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[je,o(c,{name:"denominacion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(E,{value:n.denominacion,"onUpdate:value":l[2]||(l[2]=a=>n.denominacion=a),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[Pe,o(c,{name:"institucion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(E,{value:n.institucion,"onUpdate:value":l[3]||(l[3]=a=>n.institucion=a),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[Se,o(c,{name:"fec_inicio",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(L,{value:n.fec_inicio,"onUpdate:value":l[4]||(l[4]=a=>n.fec_inicio=a),format:"DD/MM/YYYY",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[Ye,o(c,{name:"fec_fin",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(L,{value:n.fec_fin,"onUpdate:value":l[5]||(l[5]=a=>n.fec_fin=a),format:"DD/MM/YYYY",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),n.tipo==1||n.tipo==2||n.tipo==3||n.tipo==4?(p(),oe(d,{key:0,xs:24,sm:24,md:24,lg:24},{default:t(()=>[qe,o(c,{name:"semestres"},{default:t(()=>[o(B,{ref:"select",value:n.semestres,"onUpdate:value":l[6]||(l[6]=a=>n.semestres=a),style:{width:"100%"},options:H,onFocus:s.focus,onChange:R},null,8,["value","onFocus"])]),_:1})]),_:1})):b("",!0),o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[Ve,o(c,{name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(Q,{"file-list":n.fileList,"before-upload":N,onRemove:O},{default:t(()=>[o(i,null,{default:t(()=>[o(K),r(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),v.value?(p(),_("div",$e,[e("iframe",{src:v.value,width:"100%",height:"300px"},null,8,Ae)])):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open","onOk"]),o(j,{open:h.value,"onUpdate:open":l[9]||(l[9]=a=>h.value=a),title:"Documento adjunto",style:{"min-width":"900px"}},{footer:t(()=>[e("div",Oe,[o(i,{onClick:l[8]||(l[8]=a=>h.value==!1)},{default:t(()=>[r(" Aceptar ")]),_:1})])]),default:t(()=>[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[x.value?(p(),_("div",Re,[e("iframe",{src:te(q)+"/"+x.value,width:"100%",height:"500px"},null,8,Ne)])):b("",!0)]),_:1})]),_:1})]),_:1},8,["open"])])],64)}}};export{ko as default};
