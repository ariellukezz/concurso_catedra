import{L as Q}from"./FormularioLayout-BixE_Zsc.js";import{i,D as W,r as X,o as _,c as f,a as o,u as U,w as t,F as I,E as x,Z as Y,d as e,G as ee,b as u,t as C,f as P,H as oe,I as te}from"./app-BeUaVeIi.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as D,B as ae}from"./index-C9fHJQYV.js";import{C as le}from"./index-BMEngZwh.js";import{I as ne}from"./index-DeCWgIQf.js";import{S as re}from"./index-CaazX8tX.js";import{_ as ie,F as de}from"./index-DSfBoDRF.js";import{M as ue}from"./index-DQ-AD_lV.js";import{_ as pe,a as ce}from"./index-BBTCXYlR.js";import{_ as me}from"./index-jD7GtiRh.js";import"./unap-BqpW6IuZ.js";/* empty css                                                                         */import"./index-BwEd6jp4.js";import"./styleChecker-Df-oH1eW.js";import"./injectionKey-BXVc-oGP.js";import"./slide-Crjdf57_.js";import"./index-Dm63OEiP.js";import"./index-BUZI-vWb.js";import"./move-CJ9wQcwx.js";import"./useRefs-BX3m5628.js";import"./Col-BXR5Jqji.js";import"./index-DxAxxOeY.js";import"./EyeOutlined-BheDrf74.js";import"./useMemo-CDQeG1YS.js";import"./DownOutlined-C7-akdR9.js";import"./CheckOutlined-f9rKsAdo.js";const p=g=>(oe("data-v-3005829d"),g=g(),te(),g),_e={class:"p-4",style:{height:"calc(100vh - 63px)"}},fe={class:"flex justify-between",style:{margin:"-15px -10px"}},ge={class:""},ve={class:"font-bold",style:{"font-size":"1.1rem"}},he={class:"flex",style:{"margin-top":"0px"}},xe=p(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)),ye=p(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)),we=p(()=>e("div",{class:"flex justify-between",style:{margin:"-15px -10px"}},[e("div",{class:""},[e("div",null,[e("span",{class:"font-regular",style:{"font-size":"1rem"}}," Registrar nuevo ")]),e("div")]),e("div",{class:"flex",style:{"margin-top":"0px"}},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus-square"},[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e("line",{x1:"8",y1:"12",x2:"16",y2:"12"})])])],-1)),ke=p(()=>e("label",null,[u("Denominación"),e("span",{style:{color:"red"}},"*")],-1)),be=p(()=>e("label",null,[u("Tipo"),e("span",{style:{color:"red"}},"*")],-1)),Ce=p(()=>e("label",null,[u("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1)),De={key:0,class:"mt-2"},Fe=["src"],Le={class:"flex justify-end"},Be={key:0,class:"mt-2"},Re=["src"],Se={class:"flex justify-end"},Ue={__name:"titulos",setup(g){const j=window.location.origin,M=()=>{l.id=null,l.descripcion="",l.tipo=null,l.fileList=[],v.value=!0},v=i(!1),F=i([]),L=i([]),h=i(!1),y=i(null),T=s=>{y.value=s,h.value=!0},V=i(),l=W({id:null,descripcion:"",tipo:null,fileList:[]}),z=async()=>{let s=await x.get("/get-tipo-titulos");s.data.estado==!0?L.value=s.data.datos:console.log("Ocurrió un error")},A=s=>{console.log(`selected ${s}`)},E=async s=>{(await x.get("/eliminar-titulo/"+s)).data.estado==!0?w():console.log("Ocurrió un error")},c=i(!1),m=i(null),B=i(0),N=s=>{if(s.type==="application/pdf"){const a=new FileReader;a.onload=r=>{m.value=r.target.result},a.readAsDataURL(s),l.fileList=[s]}else D.error("¡Solo puedes cargar archivos PDF!");return!1},w=async()=>{const s=await x.get("/get-titulos-usuario");s.data.estado==!0?F.value=s.data.datos:console.log("No se encontraron datos")},O=()=>{m.value=null,l.fileList=[]},$=async()=>{const s=new FormData;s.append("file",l.fileList[0]),s.append("descripcion",l.descripcion),s.append("tipo",l.tipo);try{c.value=!0,B.value=0;const a=await x.post("cargar-titulos",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:r=>{B.value=Math.round(r.loaded*100/r.total)}});v.value=!1,c.value=!1,D.success("¡Archivo PDF cargado exitosamente!"),await w()}catch(a){c.value=!1,D.error("Error al cargar el archivo."),console.error("File upload failed:",a)}};return w(),z(),(s,a)=>{const r=ae,R=le,d=pe,k=ce,q=ne,b=ie,H=re,G=X("upload-outlined"),Z=me,J=de,S=ue;return _(),f(I,null,[o(U(Y),{title:"Registro de títulos"}),o(Q,null,{default:t(()=>[e("div",_e,[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:12,md:8,lg:12},{default:t(()=>[(_(!0),f(I,null,ee(F.value,n=>(_(),f("div",{class:"mb-2",key:n},[o(R,{class:"p-0"},{default:t(()=>[e("div",fe,[e("div",ge,[e("div",null,[e("span",ve,C(n.denominacion),1)]),e("div",null,C(n.tipo_nombre),1)]),e("div",he,[o(r,{onClick:K=>T(n.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[xe]),_:2},1032,["onClick"]),o(r,{danger:"",onClick:K=>E(n.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[ye]),_:2},1032,["onClick"])])])]),_:2},1024)]))),128)),e("div",null,[o(R,{class:"p-0",onClick:a[0]||(a[0]=n=>M()),style:{"margin-top":"0px",border:"dotted 1px black",background:"none",cursor:"pointer"}},{default:t(()=>[we]),_:1})])]),_:1}),o(d,{xs:24,sm:12,md:8,lg:12})]),_:1}),o(S,{open:v.value,"onUpdate:open":a[3]||(a[3]=n=>v.value=n),title:"Registro de título",onOk:s.handleOk},{footer:t(()=>[e("div",Le,[o(r,{type:"primary",disabled:!m.value,loading:c.value,style:{"margin-top":"16px"},onClick:$},{default:t(()=>[u(C(c.value?"Subiendo...":"Comenzar carga"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[o(J,{ref_key:"formDatos",ref:V,name:"form",model:l,rules:s.formRules},{default:t(()=>[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[ke,o(b,{name:"descripcion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(q,{value:l.descripcion,"onUpdate:value":a[1]||(a[1]=n=>l.descripcion=n),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[be,o(b,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(H,{ref:"select",value:l.tipo,"onUpdate:value":a[2]||(a[2]=n=>l.tipo=n),style:{width:"100%"},options:L.value,onFocus:s.focus,onChange:A},null,8,["value","options","onFocus"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[Ce,o(b,{name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(Z,{"file-list":l.fileList,"before-upload":N,onRemove:O},{default:t(()=>[o(r,null,{default:t(()=>[o(G),u(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),m.value?(_(),f("div",De,[e("iframe",{src:m.value,width:"100%",height:"300px"},null,8,Fe)])):P("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open","onOk"]),o(S,{open:h.value,"onUpdate:open":a[5]||(a[5]=n=>h.value=n),title:"Registro de título",style:{"min-width":"900px"}},{footer:t(()=>[e("div",Se,[o(r,{onClick:a[4]||(a[4]=n=>h.value==!1)},{default:t(()=>[u(" Aceptar ")]),_:1})])]),default:t(()=>[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[y.value?(_(),f("div",Be,[e("iframe",{src:U(j)+"/"+y.value,width:"100%",height:"500px"},null,8,Re)])):P("",!0)]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})],64)}}},lo=se(Ue,[["__scopeId","data-v-3005829d"]]);export{lo as default};
