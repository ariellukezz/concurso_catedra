import{i as r,D as X,r as Z,o as g,c as v,a as o,w as t,d as e,F as P,E as w,b as d,G as ee,t as m,f as R,u as oe,H as te,I as se}from"./app-DjzP6Xc8.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as le}from"./index-D0HqagQ7.js";import{M as ne}from"./index-D4hYEUdR.js";import{a as C}from"./index-C6cJBKTJ.js";import{B as ie}from"./index-B-NKoIPa.js";import{I as re}from"./index-DX_P1xWU.js";import{S as de}from"./index-CllVJQ-s.js";import{D as ue}from"./dayjs-Bw50x_LS.js";import{_ as ce,F as pe}from"./index-BVPH4-rA.js";import{f as me}from"./format-cwXK75ha.js";import{_ as _e,a as fe}from"./index-DVqLySPe.js";import{_ as ge}from"./index-Dz-7ay72.js";import"./compact-item-C3MMsdSX.js";import"./index-C9tvn3ls.js";import"./Col-D9pf7s4-.js";import"./firstNotUndefined-By4c3kmV.js";import"./shallowequal-Bw13IqAx.js";import"./index-CZlnR-fw.js";import"./injectionKey-BXVc-oGP.js";import"./collapseMotion-v82YJKL-.js";import"./useRefs-CY2EYO9G.js";import"./FormItemContext-BStwt122.js";import"./statusUtils-DDrkrFt_.js";import"./index-D7UOKjLm.js";import"./EyeOutlined-C0haTXOK.js";import"./useMemo-BDnbGG_P.js";import"./DownOutlined-BjpBAteB.js";import"./CheckOutlined-C91lsFFN.js";import"./move-DKmVe9rK.js";const u=h=>(te("data-v-c62b0639"),h=h(),se(),h),ve={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},he=u(()=>e("div",null,[e("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}},"I. Títulos y grados ")],-1)),xe={style:{"margin-top":"-5px"}},ye={class:"mt-3"},we={class:"flex justify-between",style:{}},be={class:""},ke={style:{"margin-bottom":"-5px","margin-top":"-2px"}},De={style:{"font-size":".8rem"}},Ce={class:"font-bold",style:{"font-size":"1rem"}},Ue={style:{"font-style":"italic",color:"#009DD1"}},Fe={class:"flex",style:{"margin-top":"0px"}},Se=u(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)),Me=u(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)),Ee=u(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)),Ie={class:""},Le=u(()=>e("label",null,[d("Denominación"),e("span",{style:{color:"red"}},"*")],-1)),Be=u(()=>e("label",null,[d("Institucion"),e("span",{style:{color:"red"}},"*")],-1)),Ne=u(()=>e("label",null,[d("Tipo"),e("span",{style:{color:"red"}},"*")],-1)),Pe=u(()=>e("label",null,[d("Reg en SUNEDU"),e("span",{style:{color:"red"}},"*")],-1)),Re=u(()=>e("label",null,[d("fec expedición"),e("span",{style:{color:"red"}},"*")],-1)),Te=u(()=>e("label",null,[d("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1)),je={key:0,class:"mt-2"},ze=["src"],Ve={class:"flex justify-end"},qe={key:0,class:"mt-2"},Ae=["src"],Oe={class:"flex justify-end"},$e={__name:"titulos",setup(h){const T=window.location.origin,j=()=>{x.value=!0},x=r(!1),U=r([]),F=r([]),z=r([{value:1,label:"SI"},{value:0,label:"NO"}]),y=r(!1),b=r(null),S=s=>{b.value=s,y.value=!0},V=r(),n=X({id:null,descripcion:"",institucion:"",fec_expedicion:"",reg_sunedu:0,tipo:null,fileList:[]}),q=async()=>{let s=await w.get("/get-tipo-titulos");s.data.estado==!0?F.value=s.data.datos:console.log("Ocurrió un error")},M=s=>{console.log(`selected ${s}`)},A=async s=>{(await w.get("/eliminar-titulo/"+s)).data.estado==!0?k():console.log("Ocurrió un error")},_=r(!1),f=r(null),E=r(0),O=s=>{if(s.type==="application/pdf"){const a=new FileReader;a.onload=i=>{f.value=i.target.result},a.readAsDataURL(s),n.fileList=[s]}else C.error("¡Solo puedes cargar archivos PDF!");return!1},k=async()=>{const s=await w.get("/get-titulos-usuario");s.data.estado==!0?U.value=s.data.datos:console.log("No se encontraron datos")},$=()=>{f.value=null,n.fileList=[]},Y=async()=>{const s=new FormData;s.append("file",n.fileList[0]),s.append("descripcion",n.descripcion),s.append("reg_sunedu",n.reg_sunedu),s.append("institucion",n.institucion),s.append("fec_expedicion",me(new Date(n.fec_expedicion),"yyyy-MM-dd")),s.append("tipo",n.tipo);try{_.value=!0,E.value=0;const a=await w.post("cargar-titulos",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:i=>{E.value=Math.round(i.loaded*100/i.total)}});x.value=!1,_.value=!1,C.success("¡Archivo PDF cargado exitosamente!"),await k()}catch(a){_.value=!1,C.error("Error al cargar el archivo."),console.error("File upload failed:",a)}},H=s=>{var a=s.split("-"),i=a.reverse().join("/");return i};return k(),q(),(s,a)=>{const i=ie,c=_e,D=fe,G=le,I=re,p=ce,L=de,J=ue,K=Z("upload-outlined"),Q=ge,W=pe,B=ne;return g(),v(P,null,[o(G,{class:"mx-2 my-2 mt-2"},{default:t(()=>[e("div",null,[e("div",ve,[he,e("div",xe,[o(i,{onClick:a[0]||(a[0]=l=>j())},{default:t(()=>[d("Agregar")]),_:1})])]),e("div",ye,[(g(!0),v(P,null,ee(U.value,l=>(g(),v("div",{class:"mb-2",key:l},[o(D,{gutter:16},{default:t(()=>[o(c,{xs:24,sm:4,md:4,lg:2},{default:t(()=>[e("div",null,m(H(l.fec_expedicion)),1)]),_:2},1024),o(c,{xs:24,sm:20,md:20,lg:22},{default:t(()=>[e("div",we,[e("div",be,[e("div",ke,[e("span",De,m(l.tipo_nombre),1)]),e("div",null,[e("span",Ce,m(l.denominacion),1)]),e("div",null,m(l.institucion),1),e("div",null,[e("span",Ue,m(l.reg_sunedu==0?"Sin registro":"Registrado en SUNEDU"),1)])]),e("div",Fe,[o(i,{onClick:N=>S(l.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[Se]),_:2},1032,["onClick"]),o(i,{onClick:N=>S(l.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[Me]),_:2},1032,["onClick"]),o(i,{danger:"",onClick:N=>A(l.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[Ee]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1}),e("div",Ie,[o(B,{open:x.value,"onUpdate:open":a[6]||(a[6]=l=>x.value=l),width:"800px",class:"w-full md:w-3/4",title:"Registro de título",onOk:s.handleOk},{footer:t(()=>[e("div",Ve,[o(i,{type:"primary",disabled:!f.value,loading:_.value,style:{"margin-top":"16px"},onClick:Y},{default:t(()=>[d(m(_.value?"Subiendo...":"Comenzar carga"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[o(W,{ref_key:"formDatos",ref:V,name:"form",model:n,rules:s.formRules},{default:t(()=>[o(D,{gutter:16},{default:t(()=>[o(c,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[Le,o(p,{name:"descripcion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(I,{value:n.descripcion,"onUpdate:value":a[1]||(a[1]=l=>n.descripcion=l),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),o(c,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[Be,o(p,{name:"institucion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(I,{value:n.institucion,"onUpdate:value":a[2]||(a[2]=l=>n.institucion=l),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),o(c,{xs:24,sm:24,md:24,lg:12},{default:t(()=>[Ne,o(p,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(L,{ref:"select",value:n.tipo,"onUpdate:value":a[3]||(a[3]=l=>n.tipo=l),style:{width:"100%"},options:F.value,onFocus:s.focus,onChange:M},null,8,["value","options","onFocus"])]),_:1})]),_:1}),o(c,{xs:24,sm:24,md:24,lg:6},{default:t(()=>[Pe,o(p,{name:"reg_sunedu",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(L,{ref:"select",value:n.reg_sunedu,"onUpdate:value":a[4]||(a[4]=l=>n.reg_sunedu=l),style:{width:"100%"},options:z.value,onFocus:s.focus,onChange:M},null,8,["value","options","onFocus"])]),_:1})]),_:1}),o(c,{xs:24,sm:24,md:24,lg:6},{default:t(()=>[Re,o(p,{name:"fec_expedicion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(J,{style:{width:"100%"},value:n.fec_expedicion,"onUpdate:value":a[5]||(a[5]=l=>n.fec_expedicion=l),format:"DD-MM-YYYY"},null,8,["value"])]),_:1})]),_:1}),o(c,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[Te,o(p,{name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(Q,{"file-list":n.fileList,"before-upload":O,onRemove:$},{default:t(()=>[o(i,null,{default:t(()=>[o(K),d(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),f.value?(g(),v("div",je,[e("iframe",{src:f.value,width:"100%",height:"300px"},null,8,ze)])):R("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open","onOk"]),o(B,{open:y.value,"onUpdate:open":a[8]||(a[8]=l=>y.value=l),title:"Registro de título",style:{"min-width":"1000px"}},{footer:t(()=>[e("div",Oe,[o(i,{onClick:a[7]||(a[7]=l=>y.value==!1)},{default:t(()=>[d(" Aceptar ")]),_:1})])]),default:t(()=>[o(D,{gutter:16},{default:t(()=>[o(c,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[b.value?(g(),v("div",qe,[e("iframe",{src:oe(T)+"/"+b.value,width:"100%",height:"500px"},null,8,Ae)])):R("",!0)]),_:1})]),_:1})]),_:1},8,["open"])])],64)}}},bo=ae($e,[["__scopeId","data-v-c62b0639"]]);export{bo as default};
