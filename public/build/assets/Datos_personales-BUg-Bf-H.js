import oe from"./formulario3-CFCBQjf_.js";import{i as r,D as ae,m as se,l as E,g as te,o as p,c as D,d as l,a as t,w as a,F as le,E as _,b as d,q,f as ne,t as re,u as ie}from"./app-BEv-xz_-.js";/* empty css                                                             */import{d as de,D as ue}from"./dayjs-Ddw8W7uJ.js";import{M as ce}from"./index-l2ko3gaW.js";import{D as me}from"./DownOutlined-CBp-o89S.js";import{b as pe}from"./index-BBl_DmlE.js";import{a as _e,S as fe}from"./index-uiTClBSa.js";import{I as ge}from"./index-CM6ue_hu.js";import{_ as ve}from"./index-DLDhozMm.js";import{_ as be}from"./index-DM4MaMXj.js";import{B as ye}from"./index-C-gWWi9a.js";import{_ as xe,F as he}from"./index-CAsReLeD.js";import{a as ke,_ as we}from"./index-Crbz17nv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./compact-item-DLNoSkYQ.js";import"./Col-BSf-gGBJ.js";import"./firstNotUndefined-DLIaKaK4.js";import"./FormItemContext-kpbbyIf-.js";import"./useMemo-CYTR-8_Z.js";import"./shallowequal-C6RQljXD.js";import"./statusUtils-ZphGMINA.js";import"./index-Bk64toM8.js";import"./move-DyYspo6b.js";import"./CheckOutlined-Lrstrdux.js";import"./EyeOutlined-C4GavBIA.js";import"./collapseMotion-CLZvXgDd.js";const Ee=l("div",null,[l("div",{class:"mb-6"},[l("div",null,[l("span",{style:{"font-size":"1.4rem","font-weight":"500","font-family":"'Times New Roman', Times, serif"}}," Registro de datos personales ")]),l("div",{style:{"margin-top":"-6px"}},"Paso 1 de 5")])],-1),De={class:"flex justify-center",style:{}},qe={class:"flex justify-center"},Ce=l("div",{style:{"margin-top":"-10px",width:"100%",display:"flex","justify-content":"center"}},null,-1),Ue=l("label",null,"Sexo",-1),Ne={key:0},Fe=l("span",{style:{color:"red"}},"*",-1),Ie={key:1},Se=l("label",null,[d("Nombres"),l("span",{style:{color:"red"}},"*")],-1),Ae=l("label",null,[d("Primer Apellido"),l("span",{style:{color:"red"}},"*")],-1),Me=l("label",null,[d("Segundo Apellido"),l("span",{style:{color:"red"}},"*")],-1),Oe=l("label",null,"Fec. Nacimiento",-1),Ve=l("span",{style:{color:"red"}},"*",-1),Ye=l("label",null,[d("Dirección"),l("span",{style:{color:"red"}},"*")],-1),je=l("label",null,[d("celular"),l("span",{style:{color:"red"}},"*")],-1),Pe=l("label",null,[d("Correo"),l("span",{style:{color:"red"}},"*")],-1),Be={class:"flex justify-end"},Re=l("div",{class:"mb-3"},[l("span",{style:{"font-size":"1.2rem","font-weight":"bold"}},"Aviso importante")],-1),Te={style:{"text-align":"justify"}},bo={__name:"Datos_personales",setup(Ke){const O=r(null),x=r(null),h=r(null),k=r([]);r(null);const V=r(null),w=r(null),Y=r([]),f=r(!1);r(null),r(null);const C=r(null),j=r([]);r(!1),r("1");const U=r(),N=r(!1);r(!1);const F=r([]),I=r(!1);r(!1);const o=ae({id:null,tipo_doc:1,nro_doc:"",paterno:"",materno:"",nombres:"",sexo:null,fec_nac:"",celular:"",correo:"",ubigeo_residencia:"",terminos:!1}),P=e=>{o.nro_doc=e.target.value.replace(/\D/g,"")},B=async()=>{try{const e=await U.value.validateFields(),s=await _.post("/save-candidato",o);s.status===202?console.log(s.data.errors):(I.value=!0,S(),L(),T("success",s.data.titulo,s.data.mensaje))}catch(e){console.error(e)}},S=async()=>{const e=await _.get("/get-candidato");e.data.estado==!0?(e.data.datos.id&&(o.id=e.data.datos.id),o.tipo_doc=e.data.datos.tipo_doc,o.nro_doc=e.data.datos.nro_doc,o.celular=e.data.datos.celular,o.paterno=e.data.datos.paterno,o.materno=e.data.datos.materno,o.nombres=e.data.datos.nombres,o.sexo=e.data.datos.sexo,e.data.datos.fec_nac&&(o.fec_nac=de(e.data.datos.fec_nac)),o.correo=e.data.datos.correo,o.ubigeo_residencia=e.data.datos.ubigeo_residencia,o.direccion=e.data.datos.direccion,o.correo=e.data.datos.correo,o.terminos=!0):f.value=!0};se(()=>{S()}),E(C,(e,s)=>{z()}),E(h,(e,s)=>{e.length>=3&&A()}),E(()=>o.nro_doc,(e,s)=>{e.length==8&&$()});const R=(e,s)=>{x.value=s.key,o.ubigeo_residencia=s.key},T=(e,s,c)=>{pe[e]({message:s,description:c})},A=async()=>{_.post("/get-ubigeo",{term:h.value}).then(e=>{k.value=e.data.datos.data,console.log("Datos recibidos:",k)}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},K=async()=>{_.post("/get-ubigeo",{term:w.value}).then(e=>{Y.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},$=async()=>{_.get("/get-inscrito-simulacro/"+o.nro_doc).then(e=>{I.value=e.data.estado}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})},z=async()=>{_.post("/get-colegios-ubigeo",{term:C.value,ubigeo:V.value}).then(e=>{j.value=e.data.datos.data}).catch(e=>{e.response?console.error("Error de servidor:",e.response.data):e.request?console.error("Error de red:",e.request):console.error("Error de configuración:",e.message)})};function G(e,s){return new Promise((c,g)=>{if(!s)g(new Error(""));else{const y=new Date(s),u=new Date,i=new Date;u.setFullYear(u.getFullYear()-100),i.setFullYear(i.getFullYear()-18),y>i||y<u?g(new Error("Debes tener entre 18 y 100 años")):c()}})}const H=()=>{f.value=!1,b.value=!1},M=()=>{o.terminos=!0,f.value=!1},b=r(!1),J=e=>{b.value=e};r(null);const L=()=>{o.tipo_doc=1,o.paterno="",o.materno="",o.nombres="",o.sexo=null,o.fec_nac="",o.celular="",o.correo="",o.pais=1,o.ubigeo_residencia="",o.grado=1,o.ubigeo_colegio=null,o.id_colegio=null,o.terminos=!1,o.id_pago=null,x.valu=!0,O.value=null,x.value=null,h.value=null};return te(()=>{if(F.value)return F.value.filter(e=>e.selected)}),A(),K(),(e,s)=>{const c=ke,g=_e,y=fe,u=xe,i=we,m=ge,Q=ue,W=ve,X=be,v=ye,Z=he,ee=ce;return p(),D(le,null,[Ee,l("div",De,[l("div",qe,[t(c,{style:{display:"flex","justify-content":"center"}},{default:a(()=>[t(i,{span:24,class:""},{default:a(()=>[t(Z,{ref_key:"formDatos",ref:U,name:"form",model:o,rules:e.formRules},{default:a(()=>[t(c,null,{default:a(()=>[Ce]),_:1}),t(c,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:12,md:8,lg:12},{default:a(()=>[l("div",null,[Ue,t(u,{name:"sexo",rules:[{required:!0,message:"Seleccione sexo",trigger:"change"}]},{default:a(()=>[l("div",null,[t(y,{value:o.sexo,"onUpdate:value":s[0]||(s[0]=n=>o.sexo=n),style:{}},{default:a(()=>[t(g,{value:1},{default:a(()=>[d("Masculino")]),_:1}),t(g,{value:2},{default:a(()=>[d("Femenino")]),_:1})]),_:1},8,["value"])])]),_:1})])]),_:1}),t(i,{xs:24,sm:12,md:8,lg:12},{default:a(()=>[o.tipo_doc===1?(p(),D("label",Ne,[d("N° documento "),Fe])):(p(),D("label",Ie,"N° Carnet Ext.")),t(u,{name:"nro_doc",rules:[{required:!0,message:"Ingrese el N° de documento"},{min:8,message:"El dni debe tener 8 digitos",trigger:"blur"}]},{default:a(()=>[o.tipo_doc==1?(p(),q(m,{key:0,value:o.nro_doc,"onUpdate:value":s[1]||(s[1]=n=>o.nro_doc=n),onInput:P,maxlength:8,style:{height:"32px"}},{suffix:a(()=>[]),_:1},8,["value"])):ne("",!0)]),_:1})]),_:1}),t(i,{xs:24,sm:12,md:12,lg:12},{default:a(()=>[Se,t(u,{name:"nombres",rules:[{required:!0,message:"Ingrese los nombres"}]},{default:a(()=>[t(m,{value:o.nombres,"onUpdate:value":s[2]||(s[2]=n=>o.nombres=n),disabled:!o.terminos,style:{height:"32px"}},{suffix:a(()=>[]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(i,{xs:24,sm:12,md:12,lg:12},{default:a(()=>[Ae,t(u,{name:"paterno",rules:[{required:!0,message:"Ingrese los nombres"}]},{default:a(()=>[t(m,{value:o.paterno,"onUpdate:value":s[3]||(s[3]=n=>o.paterno=n),disabled:!o.terminos,style:{height:"32px"}},{suffix:a(()=>[]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(i,{xs:24,sm:12,md:12,lg:12},{default:a(()=>[Me,t(u,{name:"materno",rules:[{required:!0,message:"Ingrese segundo apellido"}]},{default:a(()=>[t(m,{value:o.materno,"onUpdate:value":s[4]||(s[4]=n=>o.materno=n),disabled:!o.terminos,style:{height:"32px"}},{suffix:a(()=>[]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(i,{xs:24,sm:12,md:12,lg:12},{default:a(()=>[Oe,t(u,{name:"fec_nac",rules:[{required:!0,message:"Ingresa tu fecha de nacimiento",trigger:"change"},{validator:G,trigger:"change"}]},{default:a(()=>[t(Q,{style:{width:"100%"},placeholder:"Seleccionar fec. nacimiento",value:o.fec_nac,"onUpdate:value":s[5]||(s[5]=n=>o.fec_nac=n),format:"DD/MM/YYYY",disabled:!o.terminos},null,8,["value","disabled"])]),_:1},8,["rules"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:24},{default:a(()=>[l("label",null,[d("Ubigeo (dep/prov/dist) "+re(o.ubigeo_residencia),1),Ve]),t(u,{name:"ubigeo_residencia",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:a(()=>[t(X,{value:o.ubigeo_residencia,"onUpdate:value":s[7]||(s[7]=n=>o.ubigeo_residencia=n),options:k.value,onSelect:R,disabled:!o.terminos},{default:a(()=>[t(m,{placeholder:"Procedencia del Colegio",value:w.value,"onUpdate:value":s[6]||(s[6]=n=>w.value=n),onKeypress:e.handleKeyPress},{suffix:a(()=>[t(W,{title:"Extra information"},{default:a(()=>[t(ie(me))]),_:1})]),_:1},8,["value","onKeypress"])]),_:1},8,["value","options","disabled"])]),_:1})]),_:1}),t(i,{xs:24,sm:12,md:12,lg:24},{default:a(()=>[Ye,t(u,{name:"direccion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:a(()=>[t(m,{value:o.direccion,"onUpdate:value":s[8]||(s[8]=n=>o.direccion=n),disabled:!o.terminos,style:{height:"32px"}},{suffix:a(()=>[]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(i,{xs:24,sm:12,md:8,lg:8},{default:a(()=>[je,t(u,{name:"celular",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:a(()=>[t(m,{value:o.celular,"onUpdate:value":s[9]||(s[9]=n=>o.celular=n),disabled:!o.terminos,style:{height:"32px"}},{suffix:a(()=>[]),_:1},8,["value","disabled"])]),_:1})]),_:1}),t(i,{xs:24,sm:12,md:16,lg:16},{default:a(()=>[Pe,t(u,{name:"correo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:a(()=>[t(m,{value:o.correo,"onUpdate:value":s[10]||(s[10]=n=>o.correo=n),disabled:!o.terminos,style:{height:"32px"}},{suffix:a(()=>[]),_:1},8,["value","disabled"])]),_:1})]),_:1})]),_:1}),t(c,null,{default:a(()=>[t(i,{span:24},{default:a(()=>[l("div",Be,[t(v,{class:"mr-4",onClick:s[11]||(s[11]=n=>e.Cancelar())},{default:a(()=>[d(" Cancelar ")]),_:1}),t(v,{type:"primary",style:{width:"90px",background:"#340691","border-radius":"4px",border:"none"},onClick:s[12]||(s[12]=n=>B()),disabled:!o.terminos},{default:a(()=>[d("Guardar")]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),t(ee,{visible:f.value,"onUpdate:visible":s[14]||(s[14]=n=>f.value=n),closable:!1,maskClosable:!1,onOk:e.handleOk,onAfterOpen:e.handleModalOpen},{footer:a(()=>[t(v,{key:"back",onClick:s[13]||(s[13]=n=>H())},{default:a(()=>[d("No Acepto")]),_:1}),b.value===!1?(p(),q(v,{key:0,type:"primary",style:{width:"100px"},loading:N.value,onClick:M,disabled:""},{default:a(()=>[d("Acepto")]),_:1},8,["loading"])):(p(),q(v,{key:1,type:"primary",loading:N.value,style:{width:"100px",background:"#340691","border-radius":"4px",border:"none"},onClick:M},{default:a(()=>[d("Acepto")]),_:1},8,["loading"]))]),default:a(()=>[Re,l("div",Te,[t(oe,{parentData:b.value,onUpdateParentData:J},null,8,["parentData"])])]),_:1},8,["visible","onOk","onAfterOpen"])],64)}}};export{bo as default};
