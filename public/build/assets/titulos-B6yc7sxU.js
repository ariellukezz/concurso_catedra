import{L as Q}from"./FormularioLayout-CCT479O4.js";import{i,D as W,r as X,o as f,c as _,a as o,u as U,w as t,F as I,E as x,Z as Y,d as e,G as ee,t as C,b as p,f as P,H as oe,I as te}from"./app-DfjDEb4w.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as D}from"./index-r4i2i6zq.js";import{B as ae}from"./index-Lqz-7cwI.js";import{C as le}from"./index-DaSgdO8-.js";import{I as re}from"./index-LqUsmPKS.js";import{S as ne}from"./index-CaYFCych.js";import{_ as ie,F as de}from"./index-RtO_xSez.js";import{M as pe}from"./index-BN9iklma.js";import{_ as ue,a as ce}from"./index-DmxX4Bs7.js";import{_ as me}from"./index-DuK1LCL5.js";import"./unap-BqpW6IuZ.js";/* empty css                                                                         */import"./index-BWFYAGmP.js";import"./compact-item-BPWhzIml.js";import"./Col-Da2LrQHR.js";import"./firstNotUndefined-DV4CJdVr.js";import"./shallowequal-BOxrWo85.js";import"./index-BPay5Q4X.js";import"./injectionKey-BXVc-oGP.js";import"./collapseMotion-B2iHOIsw.js";import"./index-E8Ih7068.js";import"./RightOutlined-lXX0cvCD.js";import"./index-ddPpFWKg.js";import"./move-D0jrFHib.js";import"./FormItemContext-CYGNExwK.js";import"./useRefs-Y7v4NFsX.js";import"./statusUtils-DJICM3v5.js";import"./index-CjzoTMOF.js";import"./EyeOutlined-i4c8ja4W.js";import"./useMemo-Dw9nNSyE.js";import"./DownOutlined-DK8LamTq.js";import"./CheckOutlined-BfBe4wcP.js";const u=g=>(oe("data-v-3005829d"),g=g(),te(),g),fe={class:"p-4",style:{height:"calc(100vh - 63px)"}},_e={class:"flex justify-between",style:{margin:"-15px -10px"}},ge={class:""},ve={class:"font-bold",style:{"font-size":"1.1rem"}},he={class:"flex",style:{"margin-top":"0px"}},xe=u(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1)),ye=u(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)),we=u(()=>e("div",{class:"flex justify-between",style:{margin:"-15px -10px"}},[e("div",{class:""},[e("div",null,[e("span",{class:"font-regular",style:{"font-size":"1rem"}}," Registrar nuevo ")]),e("div")]),e("div",{class:"flex",style:{"margin-top":"0px"}},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus-square"},[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e("line",{x1:"8",y1:"12",x2:"16",y2:"12"})])])],-1)),ke=u(()=>e("label",null,[p("Denominación"),e("span",{style:{color:"red"}},"*")],-1)),be=u(()=>e("label",null,[p("Tipo"),e("span",{style:{color:"red"}},"*")],-1)),Ce=u(()=>e("label",null,[p("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1)),De={key:0,class:"mt-2"},Fe=["src"],Le={class:"flex justify-end"},Be={key:0,class:"mt-2"},Re=["src"],Se={class:"flex justify-end"},Ue={__name:"titulos",setup(g){const j=window.location.origin,M=()=>{l.id=null,l.descripcion="",l.tipo=null,l.fileList=[],v.value=!0},v=i(!1),F=i([]),L=i([]),h=i(!1),y=i(null),T=s=>{y.value=s,h.value=!0},V=i(),l=W({id:null,descripcion:"",tipo:null,fileList:[]}),z=async()=>{let s=await x.get("/get-tipo-titulos");s.data.estado==!0?L.value=s.data.datos:console.log("Ocurrió un error")},A=s=>{console.log(`selected ${s}`)},E=async s=>{(await x.get("/eliminar-titulo/"+s)).data.estado==!0?w():console.log("Ocurrió un error")},c=i(!1),m=i(null),B=i(0),N=s=>{if(s.type==="application/pdf"){const a=new FileReader;a.onload=n=>{m.value=n.target.result},a.readAsDataURL(s),l.fileList=[s]}else D.error("¡Solo puedes cargar archivos PDF!");return!1},w=async()=>{const s=await x.get("/get-titulos-usuario");s.data.estado==!0?F.value=s.data.datos:console.log("No se encontraron datos")},O=()=>{m.value=null,l.fileList=[]},$=async()=>{const s=new FormData;s.append("file",l.fileList[0]),s.append("descripcion",l.descripcion),s.append("tipo",l.tipo);try{c.value=!0,B.value=0;const a=await x.post("cargar-titulos",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:n=>{B.value=Math.round(n.loaded*100/n.total)}});v.value=!1,c.value=!1,D.success("¡Archivo PDF cargado exitosamente!"),await w()}catch(a){c.value=!1,D.error("Error al cargar el archivo."),console.error("File upload failed:",a)}};return w(),z(),(s,a)=>{const n=ae,R=le,d=ue,k=ce,q=re,b=ie,H=ne,G=X("upload-outlined"),Z=me,J=de,S=pe;return f(),_(I,null,[o(U(Y),{title:"Registro de títulos"}),o(Q,null,{default:t(()=>[e("div",fe,[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:12,md:8,lg:12},{default:t(()=>[(f(!0),_(I,null,ee(F.value,r=>(f(),_("div",{class:"mb-2",key:r},[o(R,{class:"p-0"},{default:t(()=>[e("div",_e,[e("div",ge,[e("div",null,[e("span",ve,C(r.denominacion),1)]),e("div",null,C(r.tipo_nombre),1)]),e("div",he,[o(n,{onClick:K=>T(r.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[xe]),_:2},1032,["onClick"]),o(n,{danger:"",onClick:K=>E(r.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[ye]),_:2},1032,["onClick"])])])]),_:2},1024)]))),128)),e("div",null,[o(R,{class:"p-0",onClick:a[0]||(a[0]=r=>M()),style:{"margin-top":"0px",border:"dotted 1px black",background:"none",cursor:"pointer"}},{default:t(()=>[we]),_:1})])]),_:1}),o(d,{xs:24,sm:12,md:8,lg:12})]),_:1}),o(S,{open:v.value,"onUpdate:open":a[3]||(a[3]=r=>v.value=r),title:"Registro de título",onOk:s.handleOk},{footer:t(()=>[e("div",Le,[o(n,{type:"primary",disabled:!m.value,loading:c.value,style:{"margin-top":"16px"},onClick:$},{default:t(()=>[p(C(c.value?"Subiendo...":"Comenzar carga"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[o(J,{ref_key:"formDatos",ref:V,name:"form",model:l,rules:s.formRules},{default:t(()=>[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[ke,o(b,{name:"descripcion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(q,{value:l.descripcion,"onUpdate:value":a[1]||(a[1]=r=>l.descripcion=r),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[be,o(b,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(H,{ref:"select",value:l.tipo,"onUpdate:value":a[2]||(a[2]=r=>l.tipo=r),style:{width:"100%"},options:L.value,onFocus:s.focus,onChange:A},null,8,["value","options","onFocus"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[Ce,o(b,{name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(Z,{"file-list":l.fileList,"before-upload":N,onRemove:O},{default:t(()=>[o(n,null,{default:t(()=>[o(G),p(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),m.value?(f(),_("div",De,[e("iframe",{src:m.value,width:"100%",height:"300px"},null,8,Fe)])):P("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open","onOk"]),o(S,{open:h.value,"onUpdate:open":a[5]||(a[5]=r=>h.value=r),title:"Registro de título",style:{"min-width":"900px"}},{footer:t(()=>[e("div",Se,[o(n,{onClick:a[4]||(a[4]=r=>h.value==!1)},{default:t(()=>[p(" Aceptar ")]),_:1})])]),default:t(()=>[o(k,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[y.value?(f(),_("div",Be,[e("iframe",{src:U(j)+"/"+y.value,width:"100%",height:"500px"},null,8,Re)])):P("",!0)]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})],64)}}},mo=se(Ue,[["__scopeId","data-v-3005829d"]]);export{mo as default};
