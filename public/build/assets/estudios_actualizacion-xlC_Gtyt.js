import{i as u,D as ee,r as oe,o as p,c as _,a as s,w as l,d as o,F as Y,E as y,b as r,G as te,t as m,f as b,q as se,u as le}from"./app-BEv-xz_-.js";/* empty css                                                                         */import{d as D,D as ae}from"./dayjs-Ddw8W7uJ.js";import"./es-Df54g_xw.js";import{C as ne}from"./index-D96Q7_Um.js";import{M as ie}from"./index-l2ko3gaW.js";import{a as C}from"./index-BBl_DmlE.js";import{B as re}from"./index-C-gWWi9a.js";import{S as de}from"./index-uiTClBSa.js";import{I as ue}from"./index-CM6ue_hu.js";import{_ as ce,F as pe}from"./index-CAsReLeD.js";import{f as q}from"./format-cwXK75ha.js";import{_ as me,a as fe}from"./index-Crbz17nv.js";import{_ as _e}from"./index-BJPWbErh.js";import"./compact-item-DLNoSkYQ.js";import"./Col-BSf-gGBJ.js";import"./firstNotUndefined-DLIaKaK4.js";import"./index-DLDhozMm.js";import"./FormItemContext-kpbbyIf-.js";import"./useMemo-CYTR-8_Z.js";import"./shallowequal-C6RQljXD.js";import"./statusUtils-ZphGMINA.js";import"./index-Bk64toM8.js";import"./move-DyYspo6b.js";import"./index-Dvhy9Cfo.js";import"./injectionKey-BXVc-oGP.js";import"./collapseMotion-CLZvXgDd.js";import"./useRefs-DL8MgVK2.js";import"./DownOutlined-CBp-o89S.js";import"./CheckOutlined-Lrstrdux.js";import"./EyeOutlined-C4GavBIA.js";const ve={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},ge=o("div",null,[o("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}}," II. Estudios de posgrado y actualización ")],-1),he={style:{"margin-top":"-5px"}},ye={class:"mt-3"},be={class:"flex justify-between"},xe={class:""},we={style:{"margin-bottom":"0px","margin-top":"-2px"}},ke={class:"font-bold",style:{"font-size":".9rem"}},De={class:"ml-8 mb-1"},Ce={class:"",style:{"font-size":".9rem"}},Fe={class:"text-start"},Me={key:0,class:"italic"},Ue={class:"font-bold",style:{color:"gray"}},Le={class:"flex",style:{"margin-top":"0px"}},ze=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[o("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o("circle",{cx:"12",cy:"12",r:"3"})],-1),Ee=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[o("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),je=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[o("polyline",{points:"3 6 5 6 21 6"}),o("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),Be={class:""},Pe=o("label",null,[r("Tipo"),o("span",{style:{color:"red"}},"*")],-1),Se=o("label",null,[r("Denominación"),o("span",{style:{color:"red"}},"*")],-1),Ye=o("label",null,[r("Institucion"),o("span",{style:{color:"red"}},"*")],-1),qe=o("label",null,[r("Fec inicio"),o("span",{style:{color:"red"}},"*")],-1),Ve=o("label",null,[r("Fec fin"),o("span",{style:{color:"red"}},"*")],-1),$e=o("label",null,[r("Semestres"),o("span",{style:{color:"red"}})],-1),Ae=o("label",null,[r("Archivo PDF (Max. 2mb)"),o("span",{style:{color:"red"}},"*")],-1),Ie={key:0,class:"mt-2"},Re=["src"],Ne={class:"flex justify-end"},Oe={key:0,class:"mt-2"},Te=["src"],Ge={class:"flex justify-end"},Fo={__name:"estudios_actualizacion",setup(He){const F=window.location.origin;D.locale("es");const V=()=>{v.value=!0},$=e=>{t.id=e.id,t.denominacion=e.denominacion,t.institucion=e.institucion,e.fec_inicio&&(t.fec_inicio=D(e.fec_inicio)),e.fec_fin&&(t.fec_fin=D(e.fec_fin)),f.value=F+"/"+e.url,t.semestres=e.semestres,t.tipo=e.id_tipo,v.value=!0},v=u(!1),M=u([]),U=u([]),h=u(!1),x=u(null),A=e=>{x.value=e,h.value=!0},I=u(),t=ee({id:null,tipo:null,denominacion:"",institucion:"",semestres:null,fec_inicio:null,fec_fin:null,fileList:null}),R=async()=>{let e=await y.get("/get-tipo_estudio_actualizacion");e.data.estado==!0?U.value=e.data.datos:console.log("Ocurrió un error")},N=e=>{console.log(`selected ${e}`)},O=e=>{console.log(`selected ${e}`)},g=u(!1),f=u(null),L=u(0),T=e=>{if(e.type==="application/pdf"){const a=new FileReader;a.onload=i=>{f.value=i.target.result},a.readAsDataURL(e),t.fileList=[e]}else C.error("¡Solo puedes cargar archivos PDF!");return!1},w=async()=>{const e=await y.get("/get-estudios-usuario");e.data.estado==!0?M.value=e.data.datos:console.log("No se encontraron datos")},G=()=>{f.value=null,t.fileList=[]},H=async()=>{const e=new FormData;t.fileList[0]&&e.append("file",t.fileList[0]),t.id!=null&&e.append("id",t.id),e.append("denominacion",t.denominacion),e.append("semestres",t.semestres),e.append("institucion",t.institucion),e.append("fec_inicio",q(new Date(t.fec_inicio),"yyyy-MM-dd")),e.append("fec_fin",q(new Date(t.fec_fin),"yyyy-MM-dd")),e.append("tipo",t.tipo),e.append("file",t.fileList[0]);try{g.value=!0,L.value=0;const a=await y.post("subir-estudios-posgrado",e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:i=>{L.value=Math.round(i.loaded*100/i.total)}});v.value=!1,g.value=!1,t.value=null,C.success("¡Archivo PDF cargado exitosamente!"),await w()}catch(a){g.value=!1,C.error("Error al cargar el archivo."),console.error("File upload failed:",a)}},z=e=>{var a=e.split("-"),i=a.reverse().join("/");return i},J=async e=>{(await y.get("/eliminar-estudio/"+e)).data.estado==!0?w():console.log("Ocurrió un error")},K=[{value:1,label:"1 semestre"},{value:2,label:"2 semestres"},{value:3,label:"3 semestres"},{value:4,label:"4 semestres"},{value:5,label:"5 semestres"},{value:6,label:"6 semestres"},{value:7,label:"7 semestres"},{value:8,label:"8 semestres"},{value:9,label:"9 semestres"},{value:10,label:"10 semestres"}];return w(),R(),(e,a)=>{const i=re,d=me,k=fe,Q=ne,E=de,c=ce,j=ue,B=ae,W=oe("upload-outlined"),X=_e,Z=pe,P=ie;return p(),_(Y,null,[s(Q,{class:"mx-2 my-2"},{default:l(()=>[o("div",null,[o("div",ve,[ge,o("div",he,[s(i,{onClick:a[0]||(a[0]=n=>V())},{default:l(()=>[r("Agregar")]),_:1})])]),o("div",ye,[(p(!0),_(Y,null,te(M.value,n=>(p(),_("div",{class:"mb-2",key:n},[s(k,{gutter:16},{default:l(()=>[s(d,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[o("div",be,[o("div",xe,[o("div",we,[o("span",ke,m(n.tipo_nombre),1)]),o("div",De,[o("div",null,[o("span",Ce,m(n.denominacion),1)]),o("div",null,m(n.institucion),1),o("div",Fe," De "+m(z(n.fec_inicio))+" a "+m(z(n.fec_fin)),1),n.semestres?(p(),_("div",Me,[o("span",Ue,m(n.semestres)+" semestres ",1)])):b("",!0)])]),o("div",Le,[s(i,{onClick:S=>A(n.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:l(()=>[ze]),_:2},1032,["onClick"]),s(i,{onClick:S=>$(n),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:l(()=>[Ee]),_:2},1032,["onClick"]),s(i,{danger:"",onClick:S=>J(n.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:l(()=>[je]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1}),o("div",Be,[s(P,{open:v.value,"onUpdate:open":a[7]||(a[7]=n=>v.value=n),width:"1000px",title:"Registro de estudios o actualizaciones",onOk:e.handleOk},{footer:l(()=>[o("div",Ne,[s(i,{type:"primary",disabled:!f.value,loading:g.value,style:{"margin-top":"16px"},onClick:H},{default:l(()=>[r(m(g.value?"Subiendo...":"Comenzar carga"),1)]),_:1},8,["disabled","loading"])])]),default:l(()=>[s(Z,{ref_key:"formDatos",ref:I,name:"form",model:t,rules:e.formRules},{default:l(()=>[s(k,{gutter:16},{default:l(()=>[s(d,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[Pe,s(c,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(E,{ref:"select",value:t.tipo,"onUpdate:value":a[1]||(a[1]=n=>t.tipo=n),style:{width:"100%"},options:U.value,onFocus:e.focus,onChange:N},null,8,["value","options","onFocus"])]),_:1})]),_:1}),s(d,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[Se,s(c,{name:"denominacion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(j,{value:t.denominacion,"onUpdate:value":a[2]||(a[2]=n=>t.denominacion=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[Ye,s(c,{name:"institucion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(j,{value:t.institucion,"onUpdate:value":a[3]||(a[3]=n=>t.institucion=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[qe,s(c,{name:"fec_inicio",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(B,{value:t.fec_inicio,"onUpdate:value":a[4]||(a[4]=n=>t.fec_inicio=n),format:"DD/MM/YYYY",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),s(d,{xs:24,sm:24,md:24,lg:12},{default:l(()=>[Ve,s(c,{name:"fec_fin",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(B,{value:t.fec_fin,"onUpdate:value":a[5]||(a[5]=n=>t.fec_fin=n),format:"DD/MM/YYYY",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t.tipo==1||t.tipo==2||t.tipo==3||t.tipo==4?(p(),se(d,{key:0,xs:24,sm:24,md:24,lg:24},{default:l(()=>[$e,s(c,{name:"semestres"},{default:l(()=>[s(E,{ref:"select",value:t.semestres,"onUpdate:value":a[6]||(a[6]=n=>t.semestres=n),style:{width:"100%"},options:K,onFocus:e.focus,onChange:O},null,8,["value","onFocus"])]),_:1})]),_:1})):b("",!0),s(d,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[Ae,s(c,{name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(X,{"file-list":t.fileList,"before-upload":T,onRemove:G},{default:l(()=>[s(i,null,{default:l(()=>[s(W),r(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),f.value?(p(),_("div",Ie,[o("iframe",{src:f.value,width:"100%",height:"300px"},null,8,Re)])):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open","onOk"]),s(P,{open:h.value,"onUpdate:open":a[9]||(a[9]=n=>h.value=n),title:"Documento adjunto",style:{"min-width":"900px"}},{footer:l(()=>[o("div",Ge,[s(i,{onClick:a[8]||(a[8]=n=>h.value==!1)},{default:l(()=>[r(" Aceptar ")]),_:1})])]),default:l(()=>[s(k,{gutter:16},{default:l(()=>[s(d,{xs:24,sm:24,md:24,lg:24},{default:l(()=>[x.value?(p(),_("div",Oe,[o("iframe",{src:le(F)+"/"+x.value,width:"100%",height:"500px"},null,8,Te)])):b("",!0)]),_:1})]),_:1})]),_:1},8,["open"])])],64)}}};export{Fo as default};
