import{i,D as z,m as G,l as R,o as v,c as D,a as s,w as l,F as J,E as N,d as o,b as r,t as c,f as S,q as K,u as L}from"./app-CM4qF5Mh.js";import{d as k}from"./dayjs.min-BmVjniEp.js";import"./es-CfuWOGnh.js";import{C as Q}from"./index-C7-iRoWi.js";import{M as W}from"./index-Dt6_vk1N.js";import{D as X}from"./DownOutlined-v2yC7F82.js";import{b as Z}from"./index-DowZ0jtg.js";import{B as ee}from"./index-Ch1tnbtJ.js";import{_ as oe}from"./index-MMSyGcMY.js";import{a as te,S as ae}from"./index-BUSCL0Jf.js";import{I as se}from"./index-BvCjgTVp.js";import{D as le}from"./dayjs-E05X11nu.js";import{_ as ne,F as re}from"./index-6pUwLxd9.js";import{_ as ie,a as de}from"./index-BzSoxssN.js";import{_ as ue}from"./index-CKr6c83I.js";import"./compact-item-DUQbUYEe.js";import"./index-DQ38BaY5.js";import"./Col-BH05Pm7P.js";import"./firstNotUndefined-Be8Tj-9n.js";import"./shallowequal-Z3j61R7b.js";import"./index-DjYGw9Ck.js";import"./injectionKey-BXVc-oGP.js";import"./collapseMotion-xIomzb1j.js";import"./useRefs-BxddWkqV.js";import"./FormItemContext-Mw1CmCCY.js";import"./index-BKwiFt5n.js";import"./statusUtils-D4gmIbEh.js";import"./useMemo-BaSzLHlE.js";import"./CheckOutlined-ZZAj1O78.js";import"./move-DMrzH_4-.js";import"./index-CC8guYNk.js";import"./EyeOutlined-fSaQJHtN.js";const ce={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},me=o("div",null,[o("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}},"Datos personales ")],-1),_e={style:{"margin-top":"-5px"}},pe={class:"mt-3"},fe={style:{"text-align":"justify"}},ge={key:0},ve=o("div",null,[o("span",{class:"font-bold"},"Tipo Doc"),o("span",{class:"mx-2"},":"),o("span",null,"DNI")],-1),be=o("span",{class:"font-bold"},"N° Documento",-1),xe=o("span",{class:"mx-2"},":",-1),ye=o("span",{class:"font-bold"},"Apellidos y nombres",-1),he=o("span",{class:"mx-2"},":",-1),De=o("span",{class:"font-bold"},"Procedencia",-1),ke=o("span",{class:"mx-2"},":",-1),we=o("span",{class:"font-bold"},"Dirección",-1),Ne=o("span",{class:"mx-2"},":",-1),Fe=o("span",{class:"font-bold"},"Sexo",-1),Ue=o("span",{class:"mx-2"},":",-1),Me=o("span",{class:"font-bold"},"Fecha Nac.",-1),Ce=o("span",{class:"mx-2"},":",-1),Ee=o("div",null,[o("span")],-1),Se={class:"flex justify-center mt-6",style:{}},qe={class:"flex justify-center"},Ye=o("label",null,"Sexo",-1),Ie={key:0},Oe=o("span",{style:{color:"red"}},"*",-1),je={key:1},Ae=o("label",null,[r("Nombres"),o("span",{style:{color:"red"}},"*")],-1),Be=o("label",null,[r("Primer Apellido"),o("span",{style:{color:"red"}},"*")],-1),Ve=o("label",null,[r("Segundo Apellido"),o("span",{style:{color:"red"}},"*")],-1),Pe=o("label",null,"Fec. Nacimiento",-1),$e=o("label",null,[r("Ubigeo (dep/prov/dist)"),o("span",{style:{color:"red"}},"*")],-1),Te=o("label",null,[r("Dirección"),o("span",{style:{color:"red"}},"*")],-1),He=o("label",null,[r("celular"),o("span",{style:{color:"red"}},"*")],-1),ze={class:"flex justify-end"},No={__name:"datos_personales",setup(Ge){k.locale("es"),i(null),i(null);const p=i(null),b=i(null);i(null);const q=i(!1),x=i(!1),F=i([]);i(null),i([]);const U=i();i(!1),i(!1),i(!1);const e=z({id:null,tipo_doc:1,nro_doc:"",paterno:"",materno:"",nombres:"",sexo:null,fec_nac:"",celular:"",ubigeo:"",terminos:!1}),Y=t=>{e.nro_doc=t.target.value.replace(/\D/g,"")},I=async()=>{try{const t=await U.value.validateFields();e.ubigeo=b.value.value;const a=await N.post("/save-candidato",e);a.status===202?console.log(a.data.errors):(x.value=!1,M(),j("success",a.data.titulo,a.data.mensaje),B())}catch(t){console.error(t)}},M=async()=>{const t=await N.get("/get-candidato");t.data.estado==!0?(t.data.datos.id&&(e.id=t.data.datos.id),e.tipo_doc=t.data.datos.tipo_doc,e.nro_doc=t.data.datos.nro_doc,e.celular=t.data.datos.celular,e.paterno=t.data.datos.paterno,e.materno=t.data.datos.materno,e.nombres=t.data.datos.nombres,e.sexo=t.data.datos.sexo,t.data.datos.fec_nac&&(e.fec_nac=k(t.data.datos.fec_nac)),e.correo=t.data.datos.correo,e.ubigeo=t.data.datos.lugar,p.value=t.data.datos.ubigeoseleccionado,b.value={value:t.data.datos.ubigeo},e.direccion=t.data.datos.direccion,e.correo=t.data.datos.correo,e.terminos=!0):q.value=!0};G(()=>{M()});let C;R(p,(t,a)=>{clearTimeout(C),C=setTimeout(()=>{E()},300)});const O=(t,a)=>{e.ubigeo=a.label,b.value=a},j=(t,a,m)=>{Z[t]({message:a,description:m})},E=async()=>{N.post("/get-ubigeos",{term:p.value}).then(t=>{F.value=t.data.datos}).catch(t=>{t.response?console.error("Error de servidor:",t.response.data):t.request?console.error("Error de red:",t.request):console.error("Error de configuración:",t.message)})};function A(t,a){return new Promise((m,y)=>{if(!a)y(new Error(""));else{const h=new Date(a),f=new Date,g=new Date;f.setFullYear(f.getFullYear()-100),g.setFullYear(g.getFullYear()-18),h>g||h<f?y(new Error("Debes tener entre 18 y 100 años")):m()}})}const B=()=>{e.tipo_doc=1,e.paterno="",e.materno="",e.nombres="",e.sexo=null,e.fec_nac="",e.celular="",e.correo="",e.pais=1,e.ubigeo="",e.grado=1,b.value=!0,p.value=null},V=t=>(k.locale("es"),k(t).format("DD MMMM YYYY"));return E(),(t,a)=>{const m=ee,y=oe,h=Q,f=te,g=ae,u=ne,d=ie,_=se,P=le,$=ue,w=de,T=re,H=W;return v(),D(J,null,[s(h,{class:"mx-2 my-2 mt-2"},{default:l(()=>[o("div",null,[o("div",ce,[me,o("div",_e,[s(m,{onClick:a[0]||(a[0]=n=>x.value=!0)},{default:l(()=>[r(c(e.id!=null?"Editar":"Agregar"),1)]),_:1})])]),o("div",pe,[o("p",fe,[e.id?(v(),D("div",ge,[o("div",null,[ve,o("div",null,[be,xe,r(c(e.nro_doc),1)]),o("div",null,[ye,he,r(c(e.paterno)+" "+c(e.materno)+" "+c(e.nombres),1)]),o("div",null,[De,ke,r(" "+c(e.ubigeo),1)]),o("div",null,[we,Ne,r(c(e.direccion),1)]),o("div",null,[Fe,Ue,r(c(e.nro_doc==1?"Femenino":"Masculino"),1)]),o("div",null,[Me,Ce,r(c(V(e.fec_nac)),1)])]),Ee])):S("",!0),s(y,{title:"¿Seguro de eliminar？","ok-text":"Si","cancel-text":"No",onConfirm:a[1]||(a[1]=n=>t.eliminar(t.descripcion.id))})])])])]),_:1}),s(H,{visible:x.value,"onUpdate:visible":a[14]||(a[14]=n=>x.value=n),width:"700px",title:"Datos personales",centered:"",footer:!1,maskClosable:!1,onOk:t.handleOk,onAfterOpen:t.handleModalOpen},{default:l(()=>[o("div",Se,[o("div",qe,[s(w,{style:{display:"flex","justify-content":"center"}},{default:l(()=>[s(d,{span:24,class:""},{default:l(()=>[s(T,{ref_key:"formDatos",ref:U,name:"form",model:e,rules:t.formRules},{default:l(()=>[s(w,{gutter:16},{default:l(()=>[s(d,{xs:24,sm:12,md:8,lg:12},{default:l(()=>[o("div",null,[Ye,s(u,{name:"sexo",rules:[{required:!0,message:"Seleccione sexo",trigger:"change"}]},{default:l(()=>[o("div",null,[s(g,{value:e.sexo,"onUpdate:value":a[2]||(a[2]=n=>e.sexo=n),style:{}},{default:l(()=>[s(f,{value:1},{default:l(()=>[r("Masculino")]),_:1}),s(f,{value:2},{default:l(()=>[r("Femenino")]),_:1})]),_:1},8,["value"])])]),_:1})])]),_:1}),s(d,{xs:24,sm:12,md:8,lg:12},{default:l(()=>[e.tipo_doc===1?(v(),D("label",Ie,[r("N° documento "),Oe])):(v(),D("label",je,"N° Carnet Ext.")),s(u,{name:"nro_doc",rules:[{required:!0,message:"Ingrese el N° de documento"},{min:8,message:"El dni debe tener 8 digitos",trigger:"blur"}]},{default:l(()=>[e.tipo_doc==1?(v(),K(_,{key:0,value:e.nro_doc,"onUpdate:value":a[3]||(a[3]=n=>e.nro_doc=n),onInput:Y,maxlength:8,style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])):S("",!0)]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:12,lg:12},{default:l(()=>[Ae,s(u,{name:"nombres",rules:[{required:!0,message:"Ingrese los nombres"}]},{default:l(()=>[s(_,{value:e.nombres,"onUpdate:value":a[4]||(a[4]=n=>e.nombres=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:12,lg:12},{default:l(()=>[Be,s(u,{name:"paterno",rules:[{required:!0,message:"Ingrese los nombres"}]},{default:l(()=>[s(_,{value:e.paterno,"onUpdate:value":a[5]||(a[5]=n=>e.paterno=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:12,lg:12},{default:l(()=>[Ve,s(u,{name:"materno",rules:[{required:!0,message:"Ingrese segundo apellido"}]},{default:l(()=>[s(_,{value:e.materno,"onUpdate:value":a[6]||(a[6]=n=>e.materno=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:12,lg:12},{default:l(()=>[Pe,s(u,{name:"fec_nac",rules:[{required:!0,message:"Ingresa tu fecha de nacimiento",trigger:"change"},{validator:A,trigger:"change"}]},{default:l(()=>[s(P,{style:{width:"100%"},placeholder:"Seleccionar fec. nacimiento",value:e.fec_nac,"onUpdate:value":a[7]||(a[7]=n=>e.fec_nac=n),format:"DD/MM/YYYY"},null,8,["value"])]),_:1},8,["rules"])]),_:1}),s(d,{xs:24,sm:24,md:12,lg:24},{default:l(()=>[$e,s(u,{name:"ubigeo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s($,{value:e.ubigeo,"onUpdate:value":a[9]||(a[9]=n=>e.ubigeo=n),options:F.value,onSelect:O,onHandleOk:t.habld},{default:l(()=>[s(_,{placeholder:"Procedencia",value:p.value,"onUpdate:value":a[8]||(a[8]=n=>p.value=n)},{suffix:l(()=>[s(L(X))]),_:1},8,["value"])]),_:1},8,["value","options","onHandleOk"])]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:12,lg:16},{default:l(()=>[Te,s(u,{name:"direccion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(_,{value:e.direccion,"onUpdate:value":a[10]||(a[10]=n=>e.direccion=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:12,lg:8},{default:l(()=>[He,s(u,{name:"celular",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:l(()=>[s(_,{value:e.celular,"onUpdate:value":a[11]||(a[11]=n=>e.celular=n),style:{height:"32px"}},{suffix:l(()=>[]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),s(w,null,{default:l(()=>[s(d,{span:24},{default:l(()=>[o("div",ze,[s(m,{class:"mr-4",onClick:a[12]||(a[12]=n=>t.Cancelar())},{default:l(()=>[r(" Cancelar ")]),_:1}),s(m,{type:"primary",style:{width:"90px",background:"#00a0c8",color:"white","border-radius":"4px",border:"none"},onClick:a[13]||(a[13]=n=>I())},{default:l(()=>[r("Guardar")]),_:1})])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])])]),_:1},8,["visible","onOk","onAfterOpen"])],64)}}};export{No as default};
