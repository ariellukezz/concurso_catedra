import{L as J}from"./FormularioLayout-DpTM0Rgx.js";import{i as r,D as K,r as Q,o as m,c as f,a as o,u as B,w as t,F as P,E as v,Z as W,d as e,G as X,t as k,b as u,f as R}from"./app-Q_3-Ao_u.js";import{a as b}from"./index-DuTkR8vF.js";import{B as Y}from"./index-6QXb-wCm.js";import{C as ee}from"./index-OQ_TK0Vr.js";import{I as oe}from"./index-DMc2qG6d.js";import{S as te}from"./index-C2ZM5AhM.js";import{_ as se,F as ae}from"./index-bhdxRi8w.js";import{M as le}from"./index-Cb0qmqF9.js";import{_ as ne,a as ie}from"./index-DwHKXQPf.js";import{_ as re}from"./index-D89vegDn.js";import"./unap-BqpW6IuZ.js";/* empty css                                                                         */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BamLtfVa.js";import"./compact-item-Z78VztqK.js";import"./Col-CPKWV_BO.js";import"./firstNotUndefined-wHvDY7Z8.js";import"./shallowequal-BKZtUhw6.js";import"./index-8_AQkQAU.js";import"./injectionKey-BXVc-oGP.js";import"./collapseMotion-DVas_xK4.js";import"./index-8uqxJTvE.js";import"./RightOutlined-RBfzBMsO.js";import"./index-BsGYeiIh.js";import"./move-g5z7UrKN.js";import"./FormItemContext-DvseOeOv.js";import"./useRefs-B1plTYKw.js";import"./statusUtils-CPur5UmF.js";import"./index-CYyBPbGM.js";import"./EyeOutlined-fYOyLmCa.js";import"./useMemo-D9xz1Y-O.js";import"./DownOutlined-D0euq62q.js";import"./CheckOutlined-DhNylv5v.js";const de={class:"p-4",style:{height:"calc(100vh - 63px)"}},ue={class:"flex justify-between",style:{margin:"-15px -10px"}},pe={class:""},ce={class:"font-bold",style:{"font-size":"1.1rem"}},me={class:"flex",style:{"margin-top":"0px"}},fe=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),_e=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),ge=e("div",{class:"flex justify-between",style:{margin:"-15px -10px"}},[e("div",{class:""},[e("div",null,[e("span",{class:"font-regular",style:{"font-size":"1rem"}}," Registrar nuevo ")]),e("div")]),e("div",{class:"flex",style:{"margin-top":"0px"}},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-plus-square"},[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e("line",{x1:"8",y1:"12",x2:"16",y2:"12"})])])],-1),ve=e("label",null,[u("Denominación"),e("span",{style:{color:"red"}},"*")],-1),he=e("label",null,[u("Tipo"),e("span",{style:{color:"red"}},"*")],-1),xe=e("label",null,[u("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1),ye={key:0,class:"mt-2"},we=["src"],ke={class:"flex justify-end"},be={key:0,class:"mt-2"},Ce=["src"],De={class:"flex justify-end"},io={__name:"estudiosActualizaciones",setup(Fe){const U=window.location.origin,j=()=>{l.id=null,l.denominacion="",l.tipo=null,l.fileList=[],_.value=!0},_=r(!1),C=r([]),D=r([]),g=r(!1),h=r(null),M=s=>{h.value=s,g.value=!0},A=r(),l=K({id:null,tipo:null,fileList:[]}),E=async()=>{let s=await v.get("/get-tipo_estudio_actualizacion");s.data.estado==!0?D.value=s.data.datos:console.log("Ocurrió un error")},S=s=>{console.log(`selected ${s}`)},V=async s=>{(await v.get("/eliminar-publicacion/"+s)).data.estado==!0?x():console.log("Ocurrió un error")},p=r(!1),c=r(null),F=r(0),N=s=>{if(s.type==="application/pdf"){const a=new FileReader;a.onload=i=>{c.value=i.target.result},a.readAsDataURL(s),l.fileList=[s]}else b.error("¡Solo puedes cargar archivos PDF!");return!1},x=async()=>{const s=await v.get("/get-estudios-usuario");s.data.estado==!0?C.value=s.data.datos:console.log("No se encontraron datos")},O=()=>{c.value=null,l.fileList=[]},T=async()=>{const s=new FormData;s.append("denominacion",l.denominacion),s.append("file",l.fileList[0]),s.append("tipo",l.tipo);try{p.value=!0,F.value=0;const a=await v.post("subir-estudios-posgrado",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:i=>{F.value=Math.round(i.loaded*100/i.total)}});_.value=!1,p.value=!1,b.success("¡Archivo PDF cargado exitosamente!"),await x()}catch(a){p.value=!1,b.error("Error al cargar el archivo."),console.error("File upload failed:",a)}};return x(),E(),(s,a)=>{const i=Y,L=ee,d=ne,y=ie,$=oe,w=se,q=te,I=Q("upload-outlined"),G=re,H=ae,z=le;return m(),f(P,null,[o(B(W),{title:"Registro de actualizaciones"}),o(J,null,{default:t(()=>[e("div",de,[o(y,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:12,md:8,lg:12},{default:t(()=>[(m(!0),f(P,null,X(C.value,n=>(m(),f("div",{class:"mb-2",key:n},[o(L,{class:"p-0"},{default:t(()=>[e("div",ue,[e("div",pe,[e("div",null,[e("span",ce,k(n.denominacion),1)]),e("div",null,k(n.tipo_nombre),1)]),e("div",me,[o(i,{onClick:Z=>M(n.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[fe]),_:2},1032,["onClick"]),o(i,{danger:"",onClick:Z=>V(n.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[_e]),_:2},1032,["onClick"])])])]),_:2},1024)]))),128)),e("div",null,[o(L,{class:"p-0",onClick:a[0]||(a[0]=n=>j()),style:{"margin-top":"0px",border:"dotted 1px black",background:"none",cursor:"pointer"}},{default:t(()=>[ge]),_:1})])]),_:1}),o(d,{xs:24,sm:12,md:8,lg:12})]),_:1}),o(z,{open:_.value,"onUpdate:open":a[3]||(a[3]=n=>_.value=n),title:"Registro de estudios o actualizaciones",onOk:s.handleOk},{footer:t(()=>[e("div",ke,[o(i,{type:"primary",disabled:!c.value,loading:p.value,style:{"margin-top":"16px"},onClick:T},{default:t(()=>[u(k(p.value?"Subiendo...":"Comenzar carga"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[o(H,{ref_key:"formDatos",ref:A,name:"form",model:l,rules:s.formRules},{default:t(()=>[o(y,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[ve,o(w,{name:"denominacion",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o($,{value:l.denominacion,"onUpdate:value":a[1]||(a[1]=n=>l.denominacion=n),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[he,o(w,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(q,{ref:"select",value:l.tipo,"onUpdate:value":a[2]||(a[2]=n=>l.tipo=n),style:{width:"100%"},options:D.value,onFocus:s.focus,onChange:S},null,8,["value","options","onFocus"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[xe,o(w,{name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(G,{"file-list":l.fileList,"before-upload":N,onRemove:O},{default:t(()=>[o(i,null,{default:t(()=>[o(I),u(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),c.value?(m(),f("div",ye,[e("iframe",{src:c.value,width:"100%",height:"300px"},null,8,we)])):R("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open","onOk"]),o(z,{open:g.value,"onUpdate:open":a[5]||(a[5]=n=>g.value=n),title:"Registro de título",style:{"min-width":"900px"}},{footer:t(()=>[e("div",De,[o(i,{onClick:a[4]||(a[4]=n=>g.value==!1)},{default:t(()=>[u(" Aceptar ")]),_:1})])]),default:t(()=>[o(y,{gutter:16},{default:t(()=>[o(d,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[h.value?(m(),f("div",be,[e("iframe",{src:B(U)+"/"+h.value,width:"100%",height:"500px"},null,8,Ce)])):R("",!0)]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})],64)}}};export{io as default};
