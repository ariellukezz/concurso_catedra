import{i as r,D as q,r as G,o as u,c as p,a as o,w as t,d as e,F as R,E as A,b as d,G as H,t as x,f as B,u as X}from"./app-BeUaVeIi.js";import{C as J}from"./index-BMEngZwh.js";import{M as K}from"./index-DQ-AD_lV.js";import{a as w,B as O}from"./index-C9fHJQYV.js";import{I as Q}from"./index-DeCWgIQf.js";import{S as W}from"./index-CaazX8tX.js";import{_ as Y,F as Z}from"./index-DSfBoDRF.js";import{_ as ee,a as oe}from"./index-BBTCXYlR.js";import{_ as te}from"./index-jD7GtiRh.js";import"./styleChecker-Df-oH1eW.js";import"./slide-Crjdf57_.js";import"./index-BwEd6jp4.js";import"./injectionKey-BXVc-oGP.js";import"./useRefs-BX3m5628.js";import"./Col-BXR5Jqji.js";import"./index-DxAxxOeY.js";import"./EyeOutlined-BheDrf74.js";import"./useMemo-CDQeG1YS.js";import"./DownOutlined-C7-akdR9.js";import"./CheckOutlined-f9rKsAdo.js";import"./move-CJ9wQcwx.js";const ae={class:"flex justify-between border-b-2",style:{"border-bottom":"solid 2px #009DD1","padding-bottom":"8px"}},se=e("div",null,[e("span",{style:{"font-weight":"bold","font-size":"1rem",color:"#009DD1"}}," IX. Actividades de extensión cultural, proyección y responsabilidad social en la especialidad ")],-1),le={style:{"margin-top":"-5px"}},ne={class:"mt-5 mx-2 my-2"},ie={class:"flex justify-between",style:{margin:"-5px -10px"}},re={class:""},de={class:"font-bold",style:{"font-size":".9rem"}},ce={class:"italic"},ue={class:"flex",style:{"margin-top":"0px"}},pe=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),me=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#1a2843","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2"},[e("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})],-1),_e=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),fe={class:"px-4"},ve=e("label",null,[d("Actividad"),e("span",{style:{color:"red"}},"*")],-1),he=e("label",null,[d("Tipo"),e("span",{style:{color:"red"}},"*")],-1),ge=e("label",null,[d("Archivo PDF (Max. 2mb)"),e("span",{style:{color:"red"}},"*")],-1),xe={key:0,class:"mt-2"},we=["src"],ye={class:"flex justify-end"},be={key:0,class:"mt-2"},ke=["src"],Ce={class:"flex justify-end"},Je={__name:"proyeccion",setup(De){const U=window.location.origin,m=r(!1),y=r([]),j=r([{value:1,label:"Resolución Rectoral"},{value:2,label:"Resolución Directoral"},{value:3,label:"Resolución Decanal"}]),_=r(!1),f=r(null),i=q({id:null,actividad:null,tipo:null,fileList:[]}),M=()=>{m.value=!0},b=a=>{f.value=a,_.value=!0},k=async()=>{try{const a=await A.get("/get-actividades  ");a.data.estado?y.value=a.data.datos:console.error("No se encontraron títulos.")}catch(a){console.error("Error en la solicitud de títulos:",a)}},P=()=>{f.value=null,i.fileList=[]},c=r(!1),v=r(null),C=r(0),E=a=>{if(a.type==="application/pdf"){const s=new FileReader;s.onload=n=>{v.value=n.target.result},s.readAsDataURL(a),i.fileList=[a]}else w.error("¡Solo puedes cargar archivos PDF!");return!1},V=async()=>{const a=new FormData;a.append("file",i.fileList[0]),a.append("actividad",i.actividad),a.append("tipo",i.tipo);try{c.value=!0,C.value=0;const s=await A.post("save-actividad-proyeccion",a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer your-auth-token"},onUploadProgress:n=>{C.value=Math.round(n.loaded*100/n.total)}});m.value=!1,c.value=!1,w.success("¡Archivo PDF cargado exitosamente!"),await k()}catch(s){c.value=!1,w.error("Error al cargar el archivo."),console.error("Error en la carga del archivo:",s)}};return k(),(a,s)=>{const n=O,z=J,S=Q,g=Y,h=ee,N=W,T=G("upload-outlined"),$=te,D=oe,I=Z,F=K;return u(),p(R,null,[o(z,{class:"mx-2 my-2"},{default:t(()=>[e("div",null,[e("div",ae,[se,e("div",le,[o(n,{onClick:s[0]||(s[0]=l=>M())},{default:t(()=>[d("Agregar")]),_:1})])]),e("div",ne,[(u(!0),p(R,null,H(y.value,l=>(u(),p("div",{class:"mb-5",key:l},[e("div",ie,[e("div",re,[e("div",null,[e("span",de,x(l.actividad),1)]),e("div",null,[e("span",ce,"( "+x(l.resolucion)+" )",1)])]),e("div",ue,[o(n,{onClick:L=>b(l.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[pe]),_:2},1032,["onClick"]),o(n,{onClick:L=>b(l.url),class:"mr-2",style:{width:"20px",height:"20px","padding-left":"3px",border:"solid #1a2843 1px"}},{default:t(()=>[me]),_:2},1032,["onClick"]),o(n,{danger:"",onClick:L=>a.eliminarTitulo(l.id),style:{width:"20px",height:"20px","padding-left":"3px"}},{default:t(()=>[_e]),_:2},1032,["onClick"])])])]))),128))])])]),_:1}),e("div",fe,[o(F,{open:m.value,"onUpdate:open":s[3]||(s[3]=l=>m.value=l),width:"580px",title:"Registro de actividad"},{footer:t(()=>[e("div",ye,[o(n,{type:"primary",disabled:!v.value,loading:c.value,style:{"margin-top":"16px"},onClick:V},{default:t(()=>[d(x(c.value?"Subiendo...":"Comenzar carga"),1)]),_:1},8,["disabled","loading"])])]),default:t(()=>[o(I,{ref:"formDatos",name:"form",model:i,rules:a.formRules},{default:t(()=>[o(D,{gutter:16},{default:t(()=>[o(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[ve,o(g,{name:"actividad",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(S,{value:i.actividad,"onUpdate:value":s[1]||(s[1]=l=>i.actividad=l),style:{height:"32px"}},{suffix:t(()=>[]),_:1},8,["value"])]),_:1})]),_:1}),o(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[he,o(g,{name:"tipo",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o(N,{ref:"select",value:i.tipo,"onUpdate:value":s[2]||(s[2]=l=>i.tipo=l),style:{width:"100%"},options:j.value,onFocus:a.focus,onChange:a.selecionarTipo},null,8,["value","options","onFocus","onChange"])]),_:1})]),_:1}),o(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[ge,o(g,{name:"fileList",rules:[{required:!0,message:"Este campo es obligatorio"}]},{default:t(()=>[o($,{"file-list":i.fileList,"before-upload":E,onRemove:P},{default:t(()=>[o(n,null,{default:t(()=>[o(T),d(" Seleccionar archivo PDF ")]),_:1})]),_:1},8,["file-list"]),v.value?(u(),p("div",xe,[e("iframe",{src:v.value,width:"100%",height:"300px"},null,8,we)])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["open"]),o(F,{open:_.value,"onUpdate:open":s[5]||(s[5]=l=>_.value=l),width:"800px",title:"Ver adjunto"},{footer:t(()=>[e("div",Ce,[o(n,{onClick:s[4]||(s[4]=l=>_.value==!1)},{default:t(()=>[d(" Aceptar ")]),_:1})])]),default:t(()=>[o(D,{gutter:16},{default:t(()=>[o(h,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[f.value?(u(),p("div",be,[e("iframe",{src:X(U)+"/"+f.value,width:"100%",height:"500px"},null,8,ke)])):B("",!0)]),_:1})]),_:1})]),_:1},8,["open"])])],64)}}};export{Je as default};
